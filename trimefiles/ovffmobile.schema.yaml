# Rime schema settings
# encoding: utf-8
schema:
  author:
    - "洋蔥"
  description: |
    手煆輸入法
    
  name: "《手機煆》"
  schema_id: ovffmobile
  version: "202106"
  dependencies:
    - punt_ocm
    - sy_ocm

switches:
  - name: ascii_mode
    reset: 0
    states: [" 中 ", " 英 "]
  - name: full_shape
    reset: 0
    states: [" 半 ", " 全 "]
  - name: ascii_punct
    reset: 0
    states: [ " 。", " ．" ]
  - name: simplification
    reset: 0
    states: [" 原 ", " 简 "]
  - name: zh_tw
    reset: 0
    states: [" 完 ", " 精 "]
#   - options: [ utf8, big5] # (※2) 字符集選單
# #    reset: 0 # 默認
#     states: # 可以通過切功能鍵，切至 UTF8 等超大字符集
#       - " U "
#       - " B "
  - name: emoji_segestion
    reset: 1
    states: [ " 無 ", " 圖 " ]
  - name: back_mark
    reset: 1
#    states: [ " 無 ", " 註 " ]
  - name: punct_mark
    reset: 1
#    states: [ " 無 ", " 註 " ]

menu:
  alternative_select_keys: "123456789"
  page_size: 9

engine:
  filters:
    - simplifier@zh_tw
    - lua_filter@charset_filter2
#    - charset_filter@big5
    - simplifier
    - simplifier@emoji_switch
    - simplifier@back_mark
    - simplifier@punct_mark
    - uniquifier
  processors:
    - ascii_composer
    - recognizer
    - key_binder
    - speller
    - punctuator
    - selector
    - navigator
    - express_editor
  segmentors:
    - ascii_segmentor
    - matcher
    - abc_segmentor
    - affix_segmentor@puntocm
    - affix_segmentor@syocm
    - punct_segmentor
    - fallback_segmentor
  translators:
    - punct_translator
    - table_translator@top_fixed
    - script_translator
    - table_translator@puntocm
    - table_translator@syocm
    - lua_translator@email_translator
    - lua_translator@urlw_translator

simplifier:
  tips: all

zh_tw:
  opencc_config: ocm_big5e_hkscs_jis.json
  option_name: zh_tw
  tags: [ abc ]
#  tips: all

# big5:
#   tags: [ abc ]

emoji_switch:
  opencc_config: emoji_s.json
  option_name: emoji_segestion
  tags: [ abc ]
#  tips: all

back_mark:
  opencc_config: back_mark_t.json
  option_name: back_mark
  show_in_comment: true
  tags: [ abc, syocm ]
  tips: char #all

punct_mark:
  opencc_config: punct_mark_t.json
  option_name: punct_mark
  show_in_comment: true
  tags: [ punct ]
  tips: all
  comment_format:
    - erase/^.*〔.*〕.+$/
    - erase/^.+〔.*〕$/

speller:
  alphabet: "abcdefghijklmnopqrstuvwxyz,./';"
  initials: "abcdefghijklmnopqrstuvwxyz"
  delimiter: "\\" #" '"
  algebra:
### 日語 ###
## 符號
    - derive|^([eaovs][v])[,]$|$1\.|
    - derive|^([e][e][v])[,]$|$1\.|
#手機不用#    - derive|^[e][v]([,.])$|\-$1|
#手機不用#    - derive|^[e][e][v]([,.])$|\-\-$1|
    - derive|^([x][x])[,]$|$1\.|
    - derive|^[x][x]([,.])$|shime$1|
    - derive|^[x][x]([,.])$|sime$1|
    - derive|^noma([.])$|dou$1|
    - derive|^dou([.])$|onaji$1|
    - derive|^dou([.])$|onazi$1|
    - derive|^dou([.])$|odoriji$1|
    - derive|^dou([.])$|odorizi$1|
## 小字
    - derive/^xtu([,.])$/ltu$1/
    - derive/^xtu([,.])$/xtsu$1/
    - derive/^xtu([,.])$/ltsu$1/
    - derive/^x([aeiou])([,.])$/l$1$2/
    - derive/^x(y[auo]|wa)([,.])$/l$1$2/
    - derive/^xke([,.])$/lke$1/
    - derive/^xke([.])$/ke$1/
    - derive/^xka([,.])$/lka$1/
    - derive/^xka([.])$/ka$1/
## 促音+拗音
    - derive/^ssh([auo])([,.])$/ssy$1$2/
    - derive/^cch([auo])([,.])$/ccy$1$2/
    - derive/^cch([auo])([,.])$/tty$1$2/
    - derive/^jj([auo])([,.])$/zzy$1$2/ #っじゃ
    - derive/^jj([auo])([,.])$/jjy$1$2/ #っじゃ #原字典沒有
    - derive/^ddy([auo])([,.])$/zzy$1$2/ #っぢゃ
    - derive/^ddy([auo])([,.])$/jj$1$2/ #っぢゃ
## 促音
    - derive/^cchi([,.])$/tti$1/
    - derive/^sshi([,.])$/ssi$1/
    - derive/^ffu([,.])$/hhu$1/
    - derive/^ttsu([,.])$/ttu$1/
    - derive/^jji([,.])$/zzi$1/
## 拗音
    - derive/^sh([auo])([,.])$/sy$1$2/
    - derive/^ch([auo])([,.])$/cy$1$2/
    - derive/^ch([auo])([,.])$/ty$1$2/
    - derive/^j([auo])([,.])$/jy$1$2/
    - derive/^j([auo])([,.])$/zy$1$2/
    - derive/^dy([auo])([,.])$/j$1$2/
    - derive/^dy([auo])([,.])$/zy$1$2/
## 一般
    - derive/^shi([,.])$/si$1/
    - derive/^chi([,.])$/ti$1/
    - derive/^tsu([,.])$/tu$1/
    - derive/^fu([,.])$/hu$1/
    - derive/^ji([,.])$/zi$1/
    - derive/^u([,.])$/wu$1/
## 特殊
    - xform/^dvyu([.])$/dyu$1/ # デュ #特殊片假名被其他正則不轉寫。
##########################################################
    - derive/^([a-z]+)$/$1CC/
#    - xform|\/\!|\/| #韓文單音/
    - "xlit|/;,.!|ABCDF|" #-E
    - xform/^([svc])D$/$1Z/ #問號和驚嘆號不被略拼
    - derive/^([a-z]+)[CD]$/$1/ #假名 #E
    - xform/^([svc])Z$/$1D/ #問號和驚嘆號不被略拼
    - derive/^([a-z]+)A$/$1/ #韓語
    - xform/^([a-z]+)AF$/$1A/ #韓語
    - xform/^([a-z]+)AAF$/$1AA/ #韓語
    - xform/^([a-z]+)(['])(['])$/$1B/ #拉丁-大寫改寫成單「;」
    - xform/^([B])([B])([a-z]+)(['])/$3''/ #拉丁-組合變音標記
#測#    - derive/^([a-z]+)[']$/$1'A/
#測#    - derive/^([a-z]+)['][']$/$1'/ #拉丁-大寫省略成單「'」
    - derive/^([a-z]+)['B]$/$1/ #拉丁 #B' #[']?#E
    - 'xlit|ABCDF|/;,.!|' #E-

translator:
  dictionary: ovffmobile.extended
  enable_completion: false
  enable_sentence: false
  enable_user_dict: true
  preedit_format:
    - "xlit|abcdefghijklmnopqrstuvwxyz|ABCDEFGHIJKLMNOPQRSTUVWXYZ|"
    - 'xform/\\/ /'

top_fixed:
  __include: /translator
  enable_user_dict: false
  initial_quality: 1000

puntocm:
  tag: puntocm
  dictionary: punt_ocm
  enable_completion: false
  enable_sentence: false
  enable_user_dict: false
  preedit_format:
    - xform/^/〔蝦符〕/

syocm:
  tag: syocm
  dictionary: sy_ocm
  enable_completion: false
  enable_sentence: false
  enable_user_dict: true
  prefix: "'"
  suffix: " "
  tips: "《符集》"
  closing_tips: "◀《符集》"
  preedit_format:
    __include: element_ovff:/emoji_series

punctuator:
#  import_preset: default
  full_shape:
    "@" : [ "＠", "@", "﹫", "®", "©", "℗", "㊣" ]
    "#" : [ "＃", "#", "﹟" ]
    "$" : [ "＄", "$", "﹩", "￥", "¥", "€", "￡", "£", "₤", "￠", "¢", "₵", "₡", "¤", "৳", "฿", "₠", "₢", "₣", "₥", "₦", "₧", "₩", "₪", "₫", "₭", "₮", "₯", "₰", "₱", "₲", "₳", "₴", "₶", "₷", "₸", "₹", "₺", "₨", "﷼" ]
    "%" : [ "％", "%", "﹪", "‰", "‱", ⅟, ½, ↉, ⅓, ⅔, ¼, ⅕, ⅖, ⅗, ⅘, ⅙, ⅚, ⅐, ⅛, ⅜, ⅝, ⅞, ⅑, ⅒ ]
    "^" : [ "＾", "^", "‸", "∧", "∨", ●, ◉, ◎, ◯, ○, ◦, ◌, ◆, ◈, ◇, ◊, ■, ◼, ◾, ▪, □, ▢, ◻, ◽, ▫, ▣, ▲, ▴, △, ▵, ▼, ▾, ▽, ▿, ▶, ▸, "‣", ▷, ▹, ◀, ◂, ◁, ◃ ] #, "⌅", "⊻"
    "&" : [ "＆", "&", "﹠", "⁊", "°", "℃", "℉", "Å", "㏃", "㏆", "㎈", "㏄", "㏅", "㎝", "㎠", "㎤", "㏈", "㎗", "㎙", "㎓", "㎬", "㏉", "㏊", "㏋", "㎐", "㏌", "㎄", "㎅", "㎉", "㎏", "㎑", "㏍", "㎘", "㎞", "㏎", "㎢", "㎦", "㎪", "㏏", "㎸", "㎾", "㏀", "㏐", "㏓", "㎧", "㎨", "㎡", "㎥", "㎃", "㏔", "㎆", "㎎", "㎒", "㏕", "㎖", "㎜", "㎟", "㎣", "㏖", "㎫", "㎳", "㎷", "㎹", "㎽", "㎿", "㏁", "㎁", "㎋", "㎚", "㎱", "㎵", "㎻", "㏘", "㎩", "㎀", "㎊", "㏗", "㏙", "㏚", "㎰", "㎴", "㎺", "㎭", "㎮", "㎯", "㏛", "㏜", "㎔", "㏝", "㎂", "㎌", "㎍", "㎕", "㎛", "㎲", "㎶", "㎼" ]
    "*" : [ "＊", "*", "﹡", "⁎", "⁕", "×", "╳", ※, "⁜", "†", "‡", ❂, ★, ☆, ✡, ❋, ❊, ❉, ❈, ❇, ❆, ❅, ❄, ❃, ❁, ❀, ✿, ✾, ✽, ✼, ✻, ✺, ✹, ✸, ✷, ✶, ✵, ✴, ✳, ✲, ✱, ✰, ✯, ✮, ✭, ✬, ✫, ✪, ✩, ✧, ✦, ✥, ✤, ✣, ✢, ⛤, ⛥, ⛦, ⛧ ]
    "(" : [ "（", "(", "﹙", "｟", "⦅", "⁽", "₍", ︵, ⁐ ]
    ")" : [ "）", ")", "﹚", "｠", "⦆", "⁾", "₎", ︶, ⁐ ]
    "[" : [ ［, "[", 〔, 【, 〖, 〘, 〚, ﹝, "⁅", ︹, ︻ ]
    "]" : [ ］, "]", 〕, 】, 〗, 〙, 〛, ﹞, "⁆", ︺, ︼ ]
    "_" : [ "＿", "_", "₋", "⁻", "ˉ", "¯" ]
    "-" : [ "－", "-", "﹘", "—", "–", "──", "——", "⸺", "―", "ー" ]
    "+" : [ "＋", "+", "﹢", "±", "⁺", "₊" ]
    "=" : [ "＝", "=", "﹦", "⁼", "₌", "‗", "+", "-", "−", "×", "÷", "∕", "√", "∛", "∜", "±", "≠", ≒, ≡, ≈, ≌, ∽, "∞", "∝", "π", "＜", "＞", "≮", "≯", ≤, ≥, ≦, ≧, "∑", ∫, ∮, "∏", "∐", "∇", "∆", ㏑, ㏒, "∅", "∈", "∉", "⊂", "⊃", "⊆", "⊇", ∩, ∪, "¬", "˜", "∃", "∄", "∀", "∂", ∴, ∵, ∷, ⊥, ∟, ∠, ∥, ∧, ∨, "⊻", ⊕, ⊙, ⊿ ]
    "|" : [ "｜", "|", "︱", "¦", "‖", "§", "¶", "⁋", "❡", "⁌", "⁍" ]
    "\\" : [ "＼", "\\", "﹨", "‧", "·", "●", "•", "･", "・" ]
    '"' : [ "＂", '"', "々", "〃", "〻", "“", "”", "‟", "„", "〝", "〞", "〟", "‶", "″", "‷", "‴", "⁗" ]
    "'" : [ "＇", "'", "‘", "’", "‛", "‚", "‵", "′" ]
    "{" : [ "｛", "{", "﹛", ｢, 「, 『, ﹁, ﹃ ]
    "}" : [ "｝", "}", "﹜", ｣, 」, 』, ﹂, ﹄ ]
    "<" : [ "＜", "<", "﹤", "‹", «, 〈, 《, ︿, ︽, ˆ ]
    ">" : [ "＞", ">", "﹥", "›", », 〉, 》, ﹀, ︾, ˇ ]
    "`" : [ "｀", "`", "︑", "、", "､", "﹑" ]
    ":" : [ "：", ":", "﹕", "⁚", "⁝", "︙", "⋮", "⁞" ]
    ";" : [ "；", ";", "﹔", "⁏" ]
    "," : [ "，", ",", "﹐" ]
    "." : [ "。", "｡", "．", ".", "﹒", "․", "…", "⋯", "……" ]
    "~" : [ "～", "~", "〜", "⁓", "∼", "˜", "≈", "﹏", "〰" ]
    "?" : [ "？", "?", "﹖", "¿", "⁇", "⁈", "‽", "⸘" ]
    "/" : [ "／", "/", "⁄", "∕", "÷" ]
    "!" : [ "！", "!", "﹗", "¡", "‼", "⁉" ]
  half_shape:
    "@" : [ "@", "＠", "﹫", "®", "©", "℗", "㊣" ] #, "☯"
    "#" : [ "#", "＃", "﹟" ] #, "⌗", "⌘"
    "$" : [ "$", "＄", "﹩", "¥", "￥", "€", "£", "￡", "₤", "¢", "￠", "₵", "₡", "¤", "৳", "฿", "₠", "₢", "₣", "₥", "₦", "₧", "₩", "₪", "₫", "₭", "₮", "₯", "₰", "₱", "₲", "₳", "₴", "₶", "₷", "₸", "₹", "₺", "₨", "﷼" ]
    "%" : [ "%", "％", "﹪", "‰", "‱", ⅟, ½, ↉, ⅓, ⅔, ¼, ⅕, ⅖, ⅗, ⅘, ⅙, ⅚, ⅐, ⅛, ⅜, ⅝, ⅞, ⅑, ⅒ ]
    "^" : [ "^", "＾", "‸", "∧", "∨", ●, ◉, ◎, ◯, ○, ◦, ◌, ◆, ◈, ◇, ◊, ■, ◼, ◾, ▪, □, ▢, ◻, ◽, ▫, ▣, ▲, ▴, △, ▵, ▼, ▾, ▽, ▿, ▶, ▸, "‣", ▷, ▹, ◀, ◂, ◁, ◃ ] #, "⌅", "⊻"
    "&" : [ "&", "＆", "﹠", "⁊", "°", "℃", "℉", "Å", "㏃", "㏆", "㎈", "㏄", "㏅", "㎝", "㎠", "㎤", "㏈", "㎗", "㎙", "㎓", "㎬", "㏉", "㏊", "㏋", "㎐", "㏌", "㎄", "㎅", "㎉", "㎏", "㎑", "㏍", "㎘", "㎞", "㏎", "㎢", "㎦", "㎪", "㏏", "㎸", "㎾", "㏀", "㏐", "㏓", "㎧", "㎨", "㎡", "㎥", "㎃", "㏔", "㎆", "㎎", "㎒", "㏕", "㎖", "㎜", "㎟", "㎣", "㏖", "㎫", "㎳", "㎷", "㎹", "㎽", "㎿", "㏁", "㎁", "㎋", "㎚", "㎱", "㎵", "㎻", "㏘", "㎩", "㎀", "㎊", "㏗", "㏙", "㏚", "㎰", "㎴", "㎺", "㎭", "㎮", "㎯", "㏛", "㏜", "㎔", "㏝", "㎂", "㎌", "㎍", "㎕", "㎛", "㎲", "㎶", "㎼" ]
    "*" : [ "*", "＊", "﹡", "⁎", "⁕", "×", "╳", ※, "⁜", "†", "‡", ❂, ★, ☆, ✡, ❋, ❊, ❉, ❈, ❇, ❆, ❅, ❄, ❃, ❁, ❀, ✿, ✾, ✽, ✼, ✻, ✺, ✹, ✸, ✷, ✶, ✵, ✴, ✳, ✲, ✱, ✰, ✯, ✮, ✭, ✬, ✫, ✪, ✩, ✧, ✦, ✥, ✤, ✣, ✢, ⛤, ⛥, ⛦, ⛧ ]
    "(" : [ "(", "（", "﹙", "｟", "⦅", "⁽", "₍", ︵, ⁐ ]
    ")" : [ ")", "）", "﹚", "｠", "⦆", "⁾", "₎", ︶, ⁐ ]
    "[" : [ 〔, 【, 〖, "[", ［, 〘, 〚, ﹝, "⁅", ︹, ︻ ]
    "]" : [ 〕, 】, 〗, "]", ］, 〙, 〛, ﹞, "⁆", ︺, ︼ ]
    "_" : [ "_", "＿", "₋", "⁻", "ˉ", "¯" ]
    "-" : [ "-", "－", "﹘", "—", "–", "──", "——", "⸺", "―", "ー" ]
    "+" : [ "+", "＋", "﹢", "±", "⁺", "₊" ]
    "=" : [ "=", "＝", "﹦", "⁼", "₌", "‗", "+", "-", "−", "×", "÷", "∕", "√", "∛", "∜", "±", "≠", ≒, ≡, ≈, ≌, ∽, "∞", "∝", "π", "＜", "＞", "≮", "≯", ≤, ≥, ≦, ≧, "∑", ∫, ∮, "∏", "∐", "∇", "∆", ㏑, ㏒, "∅", "∈", "∉", "⊂", "⊃", "⊆", "⊇", ∩, ∪, "¬", "˜", "∃", "∄", "∀", "∂", ∴, ∵, ∷, ⊥, ∟, ∠, ∥, ∧, ∨, "⊻", ⊕, ⊙, ⊿ ]
    "|" : [ "|", "｜", "︱", "¦", "‖", "§", "¶", "⁋", "❡", "⁌", "⁍" ]
    "\\" : [ "‧", "·", "●", "•", "･", "・", "\\", "＼", "﹨" ]
    '"' : [ "々", "〃", "〻", '"', "＂", "“", "”", "‟", "„", "〝", "〞", "〟", "‶", "″", "‷", "‴", "⁗" ]
    "'" : [ "'", "＇", "‘", "’", "‛", "‚", "‵", "′" ]
    "{" : [ 『, 「, ｢, "{", "｛", "﹛", ﹁, ﹃ ]
    "}" : [ 』, 」, ｣, "}", "｝", "﹜", ﹂, ﹄ ]
    "<" : [ 〈, 《, "<", "＜", "﹤", "‹", «, ︿, ︽, ˆ ]
    ">" : [ 〉, 》, ">", "＞", "﹥", "›", », ﹀, ︾, ˇ ]
    "`" : [ "`", "｀", "︑", "、", "､", "﹑" ]
    ":" : [ "：", ":", "﹕", "⁚", "⁝", "︙", "⋮", "⁞" ]
    ";" : [ "；", ";", "﹔", "⁏" ]
    "," : [ "，", ",", "﹐" ] #標點符號碼表中已有，已遮掉
    "." : [ "。", "｡", ".", "．", "﹒", "․", "…", "⋯", "……" ] #標點符號碼表中已有，已遮掉
    "~" : [ "～", "~", "〜", "⁓", "∼", "˜", "≈", "﹏", "〰" ]
    "?" : [ "？", "?", "﹖", "¿", "⁇", "⁈", "‽", "⸘" ]
    "/" : [ "/", "／", "⁄", "∕", "÷" ]
    "!" : [ "！", "!", "﹗", "¡", "‼", "⁉" ]
  symbols:
    "()" : [ "()", "（）", "﹙﹚", "｟｠", "⦅⦆", "⁽⁾", "₍₎", ︵︶, ⁐ ]
    "[]" : [ 〔〕, 【】, 〖〗, "[]", ［］, 〘〙, 〚〛, ﹝﹞, "⁅⁆", ︹︺, ︻︼ ]
    "{}" : [ 『』, 「」, ｢｣, "{}", "｛｝", "﹛﹜", ﹁﹂, ﹃﹄ ]
    "<>" : [ 〈〉, 《》, "<>", "＜＞", "﹤﹥", "‹›", «», ︿﹀, ︽︾, ˆˇ ]
    '""' : [ "\"\"", "＂＂", "“”", "‟”", "„“", "„”", "〝〞", "〝〟", "‶″", "‷‴" ]
    "''" : [ "''", "＇＇", "‘’", "‛’", "‚‘", "‚’", "‵′" ]

key_binder:
  import_preset: default
  bindings:
    __include: element_ovff:/key_binder

editor:
  bindings:
    Return: confirm
    Control+Return: commit_raw_input
    Shift+Return: commit_script_text
    Pause: noop

recognizer:
#  import_preset: default
  patterns:
    # email: "^[a-z][-_.0-9a-z]*@.*$"
    # url: "^(https?:|ftp:|mailto:|file:).*$" #www[.]|
    puntocm: "^[,][,.'a-z]*$|^[.][.,]+[a-z]*$|^[.](oq|mp)$"
    syocm: "^['][a-z']* ?$"
    punct: "[(][)]$|[[][]]$|[{][}]$|[<][>]$|['][']$|[\"][\"]$"
    lua: "^[a-z][-_.0-9a-z]*@.*$|^(www[.]|https?:|ftp:|mailto:|file:).*$"
